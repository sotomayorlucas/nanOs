; NanOS PlatformIO Configuration
; ================================
; Build:   pio run
; Upload:  pio run -t upload
; Monitor: pio device monitor
; All:     pio run -t upload && pio device monitor

[platformio]
default_envs = esp32dev

; =============================================================================
; ESP32 DevKit (most common)
; =============================================================================
[env:esp32dev]
platform = espressif32
board = esp32dev
framework = espidf
monitor_speed = 115200
upload_speed = 921600

; Compiler flags
build_flags =
    -DNANOS_PLATFORM_ESP32
    -DNANOS_PROFILE_STANDARD
    -DNANOS_HAS_LED
    -DNANOS_HAS_GPIO
    -DNANOS_DEBUG=1
    -I../include

; Source files
build_src_filter =
    +<*>
    +<../lib/nanos/*>

; =============================================================================
; ESP32-C3 (Cheaper, RISC-V)
; =============================================================================
[env:esp32c3]
platform = espressif32
board = esp32-c3-devkitm-1
framework = espidf
monitor_speed = 115200

build_flags =
    -DNANOS_PLATFORM_ESP32
    -DNANOS_PROFILE_STANDARD
    -DNANOS_HAS_LED
    -DNANOS_DEBUG=1
    -I../include

; =============================================================================
; ESP32-S3 (More powerful, AI capable)
; =============================================================================
[env:esp32s3]
platform = espressif32
board = esp32-s3-devkitc-1
framework = espidf
monitor_speed = 115200

build_flags =
    -DNANOS_PLATFORM_ESP32
    -DNANOS_PROFILE_FULL
    -DNANOS_HAS_LED
    -DNANOS_DEBUG=1
    -I../include

; =============================================================================
; ESP8266 (Ultra cheap, limited RAM)
; =============================================================================
[env:esp8266]
platform = espressif8266
board = nodemcuv2
framework = arduino
monitor_speed = 115200

build_flags =
    -DNANOS_PLATFORM_ESP32
    -DNANOS_PROFILE_LITE
    -DNANOS_COMPACT_PACKETS
    -DNANOS_DEBUG=0
    -I../include

; =============================================================================
; LoRa32 (ESP32 + LoRa SX1276)
; =============================================================================
[env:lora32]
platform = espressif32
board = ttgo-lora32-v1
framework = espidf
monitor_speed = 115200

build_flags =
    -DNANOS_PLATFORM_ESP32
    -DNANOS_PLATFORM_LORA
    -DNANOS_PROFILE_LITE
    -DNANOS_COMPACT_PACKETS
    -DNANOS_HAS_LORA
    -DNANOS_DEEP_SLEEP
    -I../include

lib_deps =
    sandeepmistry/LoRa@^0.8.0

; =============================================================================
; Common settings
; =============================================================================
[env]
; Serial monitor filters
monitor_filters =
    direct
    esp32_exception_decoder

; Partition table (more app space)
board_build.partitions = min_spiffs.csv
